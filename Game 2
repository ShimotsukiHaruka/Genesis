<!DOCTYPE html>
<html>
<head>
    <title>声波生成器</title>
</head>
<body>
    <h1>声波生成器 (0-30000 Hz)</h1>
    <div>
        <label for="freq">频率: <span id="freqValue">440</span> Hz</label>
        <input type="range" id="freq" min="0" max="30000" value="440">
    </div>
    <div>
        <label for="vol">音量: <span id="volValue">50</span>%</label>
        <input type="range" id="vol" min="0" max="100" value="50">
    </div>
    <button id="playBtn">播放</button>
    <button id="stopBtn">停止</button>
    
    <script>
        let audioContext;
        let oscillator;
        let isPlaying = false;
        
        document.getElementById('freq').addEventListener('input', function() {
            document.getElementById('freqValue').textContent = this.value;
            if (isPlaying) {
                oscillator.frequency.value = this.value;
            }
        });
        
        document.getElementById('vol').addEventListener('input', function() {
            document.getElementById('volValue').textContent = this.value;
        });
        
        document.getElementById('playBtn').addEventListener('click', function() {
            if (!isPlaying) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.frequency.value = document.getElementById('freq').value;
                gainNode.gain.value = document.getElementById('vol').value / 100;
                
                oscillator.start();
                isPlaying = true;
                document.getElementById('playBtn').textContent = '暂停';
            } else {
                oscillator.stop();
                isPlaying = false;
                document.getElementById('playBtn').textContent = '播放';
            }
        });
        
        document.getElementById('stopBtn').addEventListener('click', function() {
            if (oscillator) {
                oscillator.stop();
                isPlaying = false;
                document.getElementById('playBtn').textContent = '播放';
            }
        });
    </script>
</body>
</html>